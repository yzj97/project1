"use strict";var _createClass=function(){function i(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,s,e){return s&&i(t.prototype,s),e&&i(t,e),t}}();function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}require(["../scripts/config.js"],function(){require(["jquery","swiper","_cookie","_jcookie","_pubilc"],function(n,t,s){var e=document.querySelector(".nav-item1"),i=document.querySelector(".list");e.onmouseenter=function(){i.style.display="block"},e.onmouseleave=function(){i.style.display="none"};for(var o=document.querySelectorAll(".list-item-goods"),a=document.querySelectorAll(".hide-list"),l=function(t){o[t].onmouseenter=function(){a[t].style.display="block"},o[t].onmouseleave=function(){a[t].style.display="none"}},c=0;c<o.length;c++)l(c);new t(".swiper-container",{speed:2e3,pagination:{el:".swiper-pagination",clickable:!0,bulletActiveClass:"my-bullet-active",bulletClass:"my-bullet"}});n.ajax({type:"get",url:"https://localhost:8848/ajax/navbanner.json",success:function(s){n.each(n(".goodsnav-list-first-goods .goodsnav-item a img"),function(t){n(".goodsnav-list-first-goods .goodsnav-item a img").eq(t).attr("src",s[t].src)}),n.each(n(".goodsnav-list-first-goods .goodsnav-item a span"),function(t){n(".goodsnav-list-first-goods .goodsnav-item a span").eq(t).html(s[t].id)}),n.each(n(".goodsnav-list-first-goods .goodsnav-item a b"),function(t){n(".goodsnav-list-first-goods .goodsnav-item a b").eq(t).html(s[t].describe)}),n.each(n(".goodsnav-list-first-goods .goodsnav-item a em"),function(t){n(".goodsnav-list-first-goods .goodsnav-item a em").eq(t).html(s[t].price)})}}),n.ajax({type:"get",url:"https://localhost:8848/ajax/navbanner1.json",success:function(s){n.each(n(".goodsnav-list-second-goods .goodsnav-item a img"),function(t){n(".goodsnav-list-second-goods .goodsnav-item a img").eq(t).attr("src",s[t].src)}),n.each(n(".goodsnav-list-second-goods .goodsnav-item a span"),function(t){n(".goodsnav-list-second-goods .goodsnav-item a span").eq(t).html(s[t].id)}),n.each(n(".goodsnav-list-second-goods .goodsnav-item a b"),function(t){n(".goodsnav-list-second-goods .goodsnav-item a b").eq(t).html(s[t].describe)}),n.each(n(".goodsnav-list-second-goods .goodsnav-item a em"),function(t){n(".goodsnav-list-second-goods .goodsnav-item a em").eq(t).html(s[t].price)})}});var r=1;n(".more").on("click",function(){r=1==r?(n(".filter-second-sel").animate({height:"90px"}),2):(n(".filter-second-sel").animate({height:"45px"}),1)}),new(function(){function s(t){_classCallCheck(this,s),this.url=t.url,this.list=t.list,this.left=t.left,this.right=t.right,this.pagelist=t.pagelist,this.num=t.num,this.index=0,this.load()}return _createClass(s,[{key:"load",value:function(){var s=this;n.ajax({url:this.url,success:function(t){s.res=t,s.createPage(),s.display(),s.sortprice(),s.sortsales()}})}},{key:"createPage",value:function(){this.maxNum=Math.ceil(this.res.length/this.num),this.pagelist.html("");for(var t=0;t<this.maxNum;t++)this.pagelist.append(n("<li>"+(t+1)+"</li>"));this.pagelist.find("li").eq(this.index).addClass("active").siblings().removeClass("active"),this.addEvent()}},{key:"addEvent",value:function(){var t=this;this.left.on("click",function(){t.changeIndex("l")}),this.right.on("click",function(){t.changeIndex("r")})}},{key:"changeIndex",value:function(t){"l"==t?0==this.index?this.index=this.maxNum-1:this.index--:this.index==this.maxNum-1?this.index=0:this.index++,this.pagelist.find("li").eq(this.index).addClass("active").siblings().removeClass("active"),this.display()}},{key:"display",value:function(){for(var t="",s=this.index*this.num;s<this.index*this.num+this.num;s++)s<this.res.length&&(t+='<div class="main-container-item">\n\t\t\t\t\t\t           \t  \t    <img class="bigimg" src="'+this.res[s].src+'">\n\t\t\t\t\t\t\t\t    \t\t<a class="xinghao">'+this.res[s].id+'</a>\n\t\t\t\t\t\t\t\t    \t\t<span class="xinxi">'+this.res[s].describe+"</span>\n\t\t\t\t\t\t\t\t    \t\t<p>"+this.res[s].price+"<b>"+this.res[s].oldprice+'</b></p>\n\t\t\t\t\t\t\t\t    \t\t<div class="img-slc">\n\t\t\t\t\t\t\t\t    \t\t\t<img src="'+this.res[s].src+'">\n\t\t\t\t\t\t\t\t    \t\t\t<img src="'+this.res[s].src+'">\n\t\t\t\t\t\t\t\t    \t\t\t<img src="'+this.res[s].src+'">\n\t\t\t\t\t\t\t\t    \t\t</div>\t\n\t\t\t\t\t\t\t\t    \t\t<a class="love">\n\t\t\t\t\t\t\t\t    \t\t\t<i class="iconfont icon-xihuan" style="color: #333333;font-size: 26px;"></i><span>喜欢</span>\n\t\t\t\t\t\t\t\t    \t\t</a>\n\t\t\t\t\t\t\t\t    \t\t<a class="chakan">\n\t\t\t\t\t\t\t\t    \t\t\t<span>添加购物车</span><i class="iconfont icon-jiarugouwuche" style="color: #333333;font-size: 26px;"></i>\n\t\t\t\t\t\t\t\t    \t\t</a> \n\t\t\t\t\t\t\t\t   </div>');this.list.html(t),this.lovechakan(),this.jionCookie()}},{key:"lovechakan",value:function(){n(".main-container-item").each(function(t,s){n(s).hover(function(){n(".love").eq(t).css({display:"block"}),n(".love").eq(t).hover(function(){n(".love span").eq(t).css({display:"inline-block"})},function(){n(".love span").eq(t).css({display:"none"})}),n(".chakan").eq(t).css({display:"block"}),n(".chakan").eq(t).hover(function(){n(".chakan span").eq(t).css({display:"inline-block"})},function(){n(".chakan span").eq(t).css({display:"none"})})},function(){n(".love").eq(t).css({display:"none"}),n(".chakan").eq(t).css({display:"none"})})})}},{key:"jionCookie",value:function(){var e=this;n.each(n(".chakan i"),function(t,s){n(s).on("click",function(){e.id=n(".xinghao").eq(t).html(),alert("添加购物车成功！"),e.setCookie()})})}},{key:"setCookie",value:function(){if(this.goods=JSON.parse(localStorage.getItem("goods"))||[],this.goods.length<1)this.goods.push({id:this.id,num:1});else{var e=this,i=!0;n.each(this.goods,function(t,s){s.id==e.id&&(e.goods[t].num++,i=!1)}),i&&this.goods.push({id:this.id,num:1})}localStorage.goods=JSON.stringify(this.goods)}},{key:"sortprice",value:function(){var i=this;n(".jiage").on("click",function(){for(var t=0;t<i.res.length;t++)for(var s=t+1;s<i.res.length;s++)if(parseInt(i.res[t].price)<parseInt(i.res[s].price)){var e=[i.res[s],i.res[t]];i.res[t]=e[0],i.res[s]=e[1]}console.log(i.res),i.display()})}},{key:"sortsales",value:function(){var i=this;n(".sales").on("click",function(){for(var t=0;t<i.res.length;t++)for(var s=t+1;s<i.res.length;s++)if(parseInt(i.res[t].sales)<parseInt(i.res[s].sales)){var e=[i.res[s],i.res[t]];i.res[t]=e[0],i.res[s]=e[1]}console.log(i.res),i.display()})}}]),s}())({url:"https://localhost:8848/ajax/goodslist.json",list:n(".main-container"),left:n(".btnL"),right:n(".btnR"),pagelist:n(".page"),num:8})})});